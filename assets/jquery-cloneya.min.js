!function(e){var n=function(n,t){var o=/^(.*)(\d)+$/i,i=e(n),l={limit:999,cloneThis:".toclone",valueClone:!1,dataClone:!1,deepClone:!1,cloneButton:".clone",deleteButton:".delete",clonePosition:"after",serializeID:!0,ignore:"label.error"},c=e.extend(l,t||{});this.getOption=function(){return c},this.setOption=function(n){e.extend(c,n||{})},i.find(c.cloneButton).length&&i.on("click",c.cloneButton,function(n){n.preventDefault(),i.triggerHandler("clone_clone",[e(this)])}),i.on("clone_clone",function(n,t){var o=i.find(c.cloneThis).length;o<c.limit?($toclone=t.closest(c.cloneThis),i.triggerHandler("clone_before_clone",[$toclone]),$newclone=$toclone.clone({withDataAndEvents:c.dataClone,deepWithDataAndEvents:c.deepClone}),$newclone.find("input, textarea, select").each(function(){r(e(this)),i.triggerHandler("clone_form_input",[e(this),$toclone,$newclone])}),i.triggerHandler("clone_after_clone",[$toclone,$newclone]),i.triggerHandler("clone_before_append",[$toclone,$newclone]),"after"!=c.clonePosition?$toclone.before($newclone):$toclone.after($newclone),c.ignore&&$newclone.find(c.ignore).remove(),a(),i.triggerHandler("clone_after_append",[$toclone,$newclone])):i.triggerHandler("clone_limit",c.limit,[$toclone])}),i.find(c.cloneButton).length&&i.on("click",c.deleteButton,function(n){n.preventDefault(),i.triggerHandler("clone_delete",[e(this)])}),i.on("clone_delete",function(n,t){var o=i.find(c.cloneThis).length;$todelete=t.closest(c.cloneThis),e.when(i.triggerHandler("clone_before_delete",[$todelete,o])).done(function(){i.triggerHandler("clone_after_delete")})}),i.on("clone_before_delete",function(n,t,o){o>1?e(t).remove():t.find("input, textarea, select").each(function(){r(e(this))})});var r=function(e){c.valueClone||e.hasClass("noEmpty")||(e.is(":checkbox")||e.is(":radio")?e.prop("checked",!1):e.val(""))},a=function(){c.serializeID===!0&&(mainid=i.find(c.cloneThis).first().attr("id"),i.find(c.cloneThis).each(function(n){j=0!==n?n:"",e(this).attr("id")&&e(this).attr("id",mainid+j);var t,i;e(this).find("*").each(function(){if(t=e(this).attr("id")){var l=t.match(o);l&&3===l.length?(i=l[1]+j,e(this).attr("id",i)):(i=t+j,e(this).attr("id",i))}e(this).closest(c.cloneThis).find("label[for='"+t+"']").attr("for",i);var r=e(this).attr("name");if(r){var a=r.match(/\[([^}]+)\]/);if(a&&a.length>=1){var d=r;r=[].map.call(d,function(e,t){return isNaN(+e)||"["!==d[t-1]||"]"!==d[t+1]?e:n}).join(""),e(this).attr("name",r)}}})}))}};e.fn.cloneya=function(t){return this.each(function(){var o=e(this);if(!o.data("cloneya")){var i=new n(this,t);o.data("cloneya",i)}})}}(jQuery);